Intégration matricielle FME + QGIS

Laboratoire #2 

[**Objectifs ****2**](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.rami0cv8pgvj)

[**Données ****2**](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.3onv98va5pdj)

[**Données lab 2 ****2**](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.ijnenp9ogee)

[**Démarrage du laboratoire #2 ****3**](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.a5zhdrt99nf0)

[**1ère partie - Intégration d’image aérienne standard ****5**](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.sfsyhp4sf25n)

[Étape 1 5](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.kmx72tcvofky)

[Étape 2 5](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.mis9hkdkbso2)

[Étape 3 5](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.h3ivm1j5yxkn)

[Étape 4 6](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.9117k95e7tns)

[Étape 5 7](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.wk2x9pjru4w1)

[Étape 6 8](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.n7qd049jvov4)

[Étape 7 9](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.u1iq0n6wpdyj)

[Étape 8 10](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.72zxovnfcvcc)

[Étape 9 11](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.blru8wuk73dg)

[Étape 10 12](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.icv6c9cxtc1c)

[**2eme partie - Intégration de raster analytique - Ilôts de chaleur ****13**](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.8rt8dz3n6msd)

[Étape 1 13](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.tewqt7ex8bel)

[Étape 2 13](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.exly3hmi380)

[Étape 3 14](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.nn0t753vzzdz)

[Visualisation QGIS 14](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.7no4p4thivdk)

[Étape 5 15](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.63uiwpc7dmpj)

[Étape 7 15](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.i99ch5ku7pi0)

[Visualisation QGIS 15](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.u85luy3k47ib)

[Étape 8 16](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.jafdhhusynuv)

[Étape 9 17](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.pzhh927cq2jo)

[**Visualisation QGIS ****17**](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.nq9o86x39by0)

[**3eme partie Intégration de raster (MNS) ****18**](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.1sj1c8tj5hgt)

[Étape 1 18](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.gmaiszah4rg9)

[Étape 2 18](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.48ninku9xapp)

[Étape 3 19](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.qbhel4stzqh6)

[Étape 4 20](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.28w8i01razrn)

[Étape 5 20](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.cje51fiugy3o)

[Visualisation QGIS 20](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.ref02442cg7k)

[Étape 6 21](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.ledpht9cip90)

[Étape 7 22](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.numjuwpbedci)

[Visualisation QGIS 23](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.zcvrwkirspzz)

[Étape 8 23](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.z4u6w1k2a0rz)

[Étape 9 24](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.9ug0borrdqji)

[Étape 10 24](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.15ljt23n4uxy)

[Étape 11 25](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.bv1wjrnn73cj)

[Étape 12 25](https://docs.google.com/document/d/18p5pdz0SWej0-bjsRlrRyFwWZJOwDeBMnp4KehJakYY/edit#heading=h.6qr36wxna4ms)


# Objectifs

- Est de lire 1 ou plusieurs types de raster, TIF, Geotiff PNG

- Est de travailler le raster pour extraire les valeurs et les transformer en vecteur

- De stocker nos rasters purement non tuilés dans Postgresql

- De tuiler nos raster en plusieurs petites images

- De tuiler et pyramider nos raster en pour la diffusion web

- Extraire les valeurs de Z pour les donner au vecteur


# Données 

# [Données lab 2](https://drive.google.com/file/d/1iTz2-g_CsjyyR1fFSzC_K_zBmjJzIJf8/view?usp=sharing)

#

# Démarrage du laboratoire #2

Drag and drop chacun des 3 fichiers suivant pour ajouter un **_READER_**

![](https://lh7-us.googleusercontent.com/zenmR04G-q49CqNsimCly4OPUVJWKgxG66p4ZRXiQURH79ms0Q8fpkyuQgm9Bg8S6RCBNefEyt2U03PgrOUHlFTWwYqRCM5fxO-u2JfqD0DoOPNCwI9xQ4hQSncuMX8lKeIYgCA5SRRGsjRjUEbke8Q)

Créez 1 bookmark pour chacun des READERs (ctrl+b)

- Raster analytique - Îlots de chaleurs

- Image aérienne - Ville Marie

- MNS - Ville Marie - 1m res

![](https://lh7-us.googleusercontent.com/-DzlubBB6Wee71uOBFDWHUZA1ShCucYZ6fQspB7HqBxMfWnFd3XlY21pUFAxV9EBRc3jC8KFa6hACkeoDukF4zb40STx2EMwL3b1JofkOQaIl_2vPoR_FgcI0BeAam5ctsNwWa_kWULcpYTI2UwckIQ)


# 1ère partie - Intégration d’image aérienne standard

## Étape 1 

- Reprojetez en 3857


## Étape 2

- Extraction des métadonnées du raster avec le **_RasterPropertyExtractor_**

**_Le transformateur "RasterPropertyExtractor" dans FME est utilisé pour extraire des propriétés et des métadonnées d'un raster, telles que la dimension, le type de données, le nombre de bandes, et d'autres informations essentielles à son analyse et traitement._**

![](https://lh7-us.googleusercontent.com/YvSGKYZ2EXbuhgA5-Bz2xqpSPzWaZ-tOrdGhvPFy8_SEQ5MzsESvfr1WmbYYlTHixRNHKw_vXBun0dFLWqk3pbI14NwW0Yesf3ZOMSponshWTtEhv9-v1ufOvxy8pFYq_sYpr6hIcJbToolQKt3OHRw)


## Étape 3

- Regarder le nombre de rows et columns pour le raster et divisez le par 10 pour l’étape 4 (les données sont générées par le **_RasterPropertyExtractor_**

![](https://lh7-us.googleusercontent.com/wyFPJEqHofpZq6zy5rbSLARrp8p-aAaqP_Iz5QgbemEwQt-Q2MU0tkhc31yLEZqi45VyG-PI2jYEuy9fiEkv9tuozev_EFs1Y0I6msdw2Pz_qDkCDdibd0CBVgdHmUZyD8T9uLkmnZ9705MBBESF8Ag)


##

## Étape 4

- Ajoutez un **_RasterResampler_** sur le Reprojector et resampler les rows / columns par 10

**_Le transformateur "RasterResampler" dans FME est utilisé pour redimensionner ou rééchantillonner une image raster, ajustant ainsi sa résolution, sa taille ou sa géométrie pour répondre à des exigences spécifiques ou pour l'aligner avec d'autres données spatiales._**

\
![](https://lh7-us.googleusercontent.com/ZkkgdU7M6IsvCHNVNsN0uI_SiFMEB0B_8VHsWu3NQgpyRkuwkRouCxNcawLP_iDAtet7h5td18b7DOuOYnSECqt83l_QJAykMllCXrf7_hGrWN2cknRc-Bo9E218eUFpejoyJe_RnCMKHN2mfzthG70)


##

## Étape 5

- Ajoutez un **_rasterPyramider_** 

  - Changez l’option pour Number of levels et choisissez 10

**_Le transformateur "RasterPyramider" dans FME est utilisé pour créer une série de pyramides raster, c'est-à-dire des versions de résolution inférieure d'une image raster originale, ce qui optimise l'affichage et l'analyse de grandes images sur différents niveaux de zoom._**

![](https://lh7-us.googleusercontent.com/Jr82CS7wh8J_rKwW-SeQr0F1Ra9rJr-IDdqaOloFv_5FcA73QHDXGHu5cVTi5ArR-MNAANfGIvny7ryXQ9kYwZSgO2se3O4Z-W8nHCk27iIFUt_DYcM3vO3G9F3g9pvBGj6UYsfT_hqtjmK3WrqbkpM)


##

## Étape 6

- AJOUTEZ un **_FeatureWriter_**

* Il permet de chaîner les actions à la suite de l’écriture, contrairement au **_Writer_** de base

![](https://lh7-us.googleusercontent.com/f1XkzkAupA5fWyLgFeqe10zrPq39vNF5K5b-KHdDEutts3EUAAq2WHjixFqW2JDLxdZ-Nz3-Ee4R9hEYl5UadW1DQs8OK2TQTuJAc3Tv8MCavZ58ZawYhS2BOlrBHVf_seyRzRelRbFkmQ7XPf3sv1k)

\
![](https://lh7-us.googleusercontent.com/lUMqvyPyDW_tFdpR7LrrXPgEbLWmQAbAz9IGIzluYO_jOcKYV_N9ZhLf9_VkMxx_BfrL5nvLmErkJhhKBSC3Xy08WU5PiJ0yqA8CoSr5lUueS8ejnrc13xUc51zvBBdYGkBX8NF3Pv1HV-xOTxu7tD4)


## Étape 7 

- Ajouter un **_SQLExecuter_** à la suite du **_FeatureWritter_** Summary

![](https://lh7-us.googleusercontent.com/ozWuRfHsuYpEeRLLN9SHFG23JIcbKJV9zYWLW_31fvBqbN-8Nxm9SYdGDSlI4bzHuDU-E-jJSQTY9yC4VabFBMegxdG6SeQEyiDQujHFadZEjuQe27MDt7Yp3odltW_cfsxsBmB0eE0buQ9IS-oaplM)

- Voici la **_requête_** à exécuter : 

* **_CREATE TABLE VOTRECODEMS.mns\_pyramid\_2 AS SELECT \* FROM "hm-2002-can-4000-0257\_pyramide" WHERE "\_pyramid\_level" = 2_**

- Ouvrez QGIS et chargez la table dans la BD pour voir l’image satellite avec un niveau de pyramide 2


## Étape 8

- Créer une nouvelle connection dans QGIS (ou éditer la)

![](https://lh7-us.googleusercontent.com/r7-RqkY_8URPPOIOeoh95WP3-wWzn2gZRR6ppyC_tEzmI-TA-FE2BTkDxMN4WT_fhe79z9BqVNkBB91MSzvqrs2hq-PUyZBticYS_AyLyYgdYt74NJfOf2byjcQJLpYVRIndPIl8HJJLBDF5aro0c2k)

- Charger le raster  __**_VOTRECODEMS.mns\_pyramid\_2_** __pour voir un aperçu resampler du raster d’origine

![](https://lh7-us.googleusercontent.com/jP0Yjeg5jvHXbNQGlf-PmGWx_6Ch_4OxKDM-vMaPVhzatFbPB6X0Wvn-m5OKrGJlf7hjOYU_Uj413edRYIGLrVfvR9_JvNsNuQIr4ZynhRI4aota8o10PSlw81vOOphK8H4b48xKJyTv85AHOYeFYVc)


## Étape 9

- Depuis le **_RasterResampler_** créer un nouveau TRANSFORMER **_WebMapTiler_**

**_Le transformateur "WebMapTiler" dans FME est conçu pour convertir des données cartographiques en tuiles (tiles) compatibles avec des services de cartographie en ligne, comme Google Maps ou OpenStreetMap, facilitant ainsi leur intégration et leur visualisation sur des plateformes de web mapping._**

![](https://lh7-us.googleusercontent.com/WH2v_B24iiQhTPmXRmpV_yxPcz8IsB087z2AkD95c2E2zdk5PoezYqIMZtQQC1y_YMVWhXH4ZEsHlc95rT0JSVg2YYcO8pdsuvcX-pUY0syYi9WyGgfJE3RVWOxoSTLa3TcFBnDU5vTYl6HAO4jTZ0o)

Laissez les options par défaut


## Étape 10 

- Écrivez le résultat du **_WebMapTiler_** dans la BD (Postgis Raster)

- Nom de la table : **_hm-2002-can-4000-0257\_wmt_**


# ![](https://lh7-us.googleusercontent.com/1S9B-Ktz8mWA2NS-qsKA2ZWlTkg6Fyh481BmtZrjQ1uCI66Ai6zcrNr2DkLo9-FMpwldfEzt_uNLwMfyFX-X4CTk3CnrwnzCB8R22N0P0eI68u5-_xlnJAQTj5g5-eNo-Wk6IlobCAby2XxVZ5P7Jl8)

# ![](https://lh7-us.googleusercontent.com/_72xT6aDq52Qc8OjXTu3A_EG8lKrehpaWwkNQ-wJzjGZntYVec5Tk4UN71S7jxFhSHPXgikgeJD-1rkWXZLCcCGxyiT1-h10ObfKmJBg09EfSv5jSvR4rtNGMiL1tp39Do6aYgXJWPhvpaoNnpquq9A)

# 2eme partie - Intégration de raster analytique - Ilôts de chaleur

## Étape 1

- Reprojetez les îlots de chaleur en 3857


## Étape 2

- Ajoutez un **_RasterToPolygonCoercer_** et connectez-la avec la couche re-projetée 

  - Changez le Label Attribute pour **_classification_**

**_Le transformateur "RasterToPolygonCoercer" dans FME convertit des images raster en entités vectorielles polygonales, permettant l'analyse et la manipulation de données raster comme des entités vectorielles dans des applications GIS et de cartographie._**

![](https://lh7-us.googleusercontent.com/efi8aVtnjUp9JuLcNr-nufojpFlIRP9yXfe4q58CalJrcK8mmiF1SkZNM6xbnSnaSavxGqmrwzMFARW310n1b9qePREJcsNWZiQeGroRvTPN1rbijH2-qnDtC_eynMhNXMh6xpghOfeY9nLQXL5Q3zo)


##

## Étape 3

- Écrivez le résultat du **_RasterToPolygonCoercer_** dans la BD (Postgis)

  - Attention le Writer doit être un **Postgis** tout court et non **_Postgis Raster_** car on écrit du vecteur

* Nom de la table : **_ilots\_chaleur\_polygones_**

![](https://lh7-us.googleusercontent.com/tSFvB64AO4SwdKqNPbohNFmfAuRl6f0t4yIB2MVCk-0mwp2Do3iCwcaK6WIpQ4PucoScMYGLHcZmndpnsFC0AaHchj_Y3QFNnprqL1CxPcjWHE9Cz2vpaLMS0gqAZhQ45slfmIGrV4qbeiWDFbK45tI)


## Visualisation QGIS

![](https://lh7-us.googleusercontent.com/Uh763mIkAjbCYrtlaoyOIGlHVGwnlALECAKafRfQiCNEl2luZeBHISyQVIPNEFbhxAltP3z4N7wX0H0kTS2raXlpXXW6ZWBy4aRUUlsTa4T4WQhgnvdxBu-fo6eRZ9zO9qihxSjltNgizIjPCVRag8Q)

Étape 4

- Ajoutez un **_RasterSharpener_** et connectez-la avec la couche re-projetée 

  - Options par Défaut

**_Le transformateur "RasterSharpener" dans FME est utilisé pour améliorer la netteté d'une image raster, en accentuant les bords et les détails pour rendre l'image plus claire et plus définie._**


## Étape 5

- Ajoutez un **_RasterCellValueRounder_******&#x20;

  - Decimal places = 1 

Étape 6

- Ajoutez un **_RasterToPolygonCoercer_** 

  - (\_label = classification)


## Étape 7

- Écrivez le résultat du **_RasterToPolygonCoercer_** dans la BD (Postgis)

- Nom de la table : **_ilots\_chaleur\_sharp\_polygones_**


## Visualisation QGIS![](https://lh7-us.googleusercontent.com/5C0NDO2ZIGU89c7u4VatumNqpsA0BKAg8DRN51InqkmVycrJ73vuuBLLaBmxnUPLh7OXgpBZKHIlhHc7KcCGbeW7IHGXcGJa3BEY1F_OEtDMIN1WWLWJvp0ERSGEXidFnr86JLiuK4qY9OvW0TKPWlo)

##

## Étape 8

- Ajoutez un **_RasterCellCoercer_** et connectez-la avec la couche re-projetée 

![](https://lh7-us.googleusercontent.com/cxHMP6oncej-U10pCxUE4rzHweZFMsRvU3jliZt0w0WG8NoKLTSC7zBU9CTCWHuU0GKL6m15ge1UI_PKn28yiQ6d5HaXMcs3KVliBZuSxK5Bc5ouExNtVANM5Y5iK8nYd7swSnSKR3TVFpIZqU4ZRz8)


## Étape 9

- Écrivez le résultat du **_RasterCellCoercer_** dans la BD (Postgis)

- Nom de la table : **_ilots\_chaleur\_points_**


# Visualisation QGIS

(pour extraire la valeur Z dans les props : $z )![](https://lh7-us.googleusercontent.com/qB1Q3oTPY2FBI9XI1PlhDaz2o1zk-7s7MCUW8XeOV079fl6kwf2WH7nNLfTOoNQNaJVR4JkewSI4cibO_cI8UeopnGsAjhgIGPzShp8Zc-ZGaOqCw-g1Y-CckB1jEJ4TeaItkKgVd6Ct66MMRuOCb3Q)


# 3eme partie Intégration de raster (MNS)

## Étape 1

- Reprojetez en 3857

  - Si vous rencontrez un erreur en faisant rouler le **_Reprojector_**, supprimer le **_Reader_** afin de le réimporter en spécifiant cette fois-ci son système de coordonnées par défaut (32188)![](https://lh7-us.googleusercontent.com/EBRndVkVEMPWZJS73-i-fyuiGmK7zEjnh5jA6_NlNCsWkwF7h-wDXELEt7Zm7yNpKkprzeLc_ZlMexUJ7b43LHKRtuILJDR5NcEU5jltbTYgynhBO1NpVtMaCdRglxn6GsKJiXvs_rD1Kdp0BjyUnh8)


## Étape 2

1. Ajoutez un **_ContourGenerator_** 

**_Le transformateur "ContourGenerator" dans FME est utilisé pour créer des lignes de contour à partir d'une surface raster, représentant des niveaux d'altitude à intervalles réguliers_**

1. Cette étape est coûteuse, si on change à la baisse les options d’interval entre contour, pour ce MNS là une option d’interval à 10m prend environ 5 minutes à rouler

![](https://lh7-us.googleusercontent.com/9rVm99Q7I2j1m5zAkt-8S427cArXJfeq5-M9r8qaW9ED69kYEeILLXnoY5jCe9vU4tRLDjI25s8PINl_d83zAqUev80u_GCi3Gm5d9kqCxMwzytubJzLF-W0RiQJReIEoM0y0U4TVv3ivy3F1G0qbME)

\*\*\* Connectez à le **_Reprojector_** à l’option Points/Lines \*\*\*


## Étape 3

- Ajoutez un **_Generalizer_**

**_Le transformateur "Generalizer" dans FME est utilisé pour simplifier ou lisser la géométrie des entités en réduisant le nombre de sommets, tout en conservant la forme générale._**

![](https://lh7-us.googleusercontent.com/Lgtwapuo7Mt8umHqhr-co7zlXMWJCEOTawzWEnexAyaQXZPw61jYfzXmSpeDSxbzTWjAxGQkC7wUzQCBwNitAQCL2cpIvtvMQbTC88xIC3DfMyQfZXgJDOycJMpy6XAc3zh-HbAnqtRQzE52SzGm10A)


##

## Étape 4

- Ajoutez un **_AreaBuilder_**

Laissez les options par défaut

**_Le transformateur "AreaBuilder" dans FME sert à créer des polygones (zones) à partir de lignes ou de points en fermant les contours ouverts et en définissant des limites spatiales._**


## Étape 5

- Écrivez le résultat du champ **_Area_** du Transformer **_AreaBuilder_** dans la BD (Postgis)

- Nom de la table : **_mns\_contour\_polygones_**


## Visualisation QGIS

\
![](https://lh7-us.googleusercontent.com/VuHCuxlS4kKGEvbXvmMgHMlgAXco6HqGL9MyCOnfXYLhCS8n7MxoySOdUoY8eDTxq3rn44TBKLLoFPlISvo-IBDUT9gBR6pTiMu1eNH2br0PPqgv9lwbcVLjz_y_EP_-iQd6nk16Xb48qKeZsSEWzqQ)


##

## Étape 6

- Ajoutez un **_RasterInterpretationCoercer_** et connectez-le avec la couche re-projetée 

**_Le transformateur "RasterInterpretationCoercer" dans FME est utilisé pour modifier la manière dont les données raster sont interprétées, en changeant leur représentation de cellules (comme les passer de points à zones ou vice versa). Cela permet d'ajuster la façon dont les opérations spatiales et les analyses sont appliquées aux données raster._**

**_On transforme ici les valeurs de RGB en RGBA pour avoir un canal de transparence_**

![](https://lh7-us.googleusercontent.com/Y_v1Hz3KnwDZLBhPxxXM6zhEmx4YA4J0o44HB2VS_VFDYNbMXCvqyvqOFKtqRzt_ekv2-ZMPeFc2VNLfb1wSBDTMXiNtrzCKxDlmXrsR2I_yejHiJG7baGyGzv4G76ZSnNGjyJQKutboB_PZthprZlY)


##

## Étape 7

Ajoutez un **_Writer_** vers le format Mbtiles et non Mbtiles (MVT) et sauvegarder-le dans votre dossier ‘data’

![](https://lh7-us.googleusercontent.com/LJ9IQghkQBhapHHxJUV0Yz00AVjOVI5n6pI2guvi541Sj_OBB8iWHXET0VhKF-f0gpUXmEOgBYAYsor-gUhD_ofih0XXSIu8qFVHYKKKWBIU2RyKZH7eXWQjjwR6wxKHxbqMyoay1fz-cWEPMxsHnS8)![](https://lh7-us.googleusercontent.com/ueUM6509Td1BGPSIoydJ9pS0OPNA032ZBrpnKqSWN4lCImqIs3g9WA_xj4BLqZUsFaIY8-QSqQU6aLQpDpDKUrOrFxM_F1Kaoqa1tY5G6bRHgjWaNNkS_KkpPIj1DofrIOPIXgHxgEW1y68dy2lU8J0)


##

## Visualisation QGIS![](https://lh7-us.googleusercontent.com/xu5G2hakNT-wxgCBZapZqVAptNLfuPjZWz6MAwgdej66W2RyQYN_-_z9XIxCm0VHdsDtqnXdZmRpOgFGjZqxtZfJwnn9EIK2eJkTz6Es5Y6r51plQRmVQY6b5979YuYGqtM-jjZwb1oLvtJ7xVXUPsw)

## Étape 8

Ajoutez un **_RasterCellValueRounder_** et connectez-le avec la couche re-projetée 

**_Le transformateur "RasterCellValueRounder" dans FME est utilisé pour arrondir les valeurs des cellules dans une image raster à des nombres entiers ou à une précision décimale spécifiée._**

![](https://lh7-us.googleusercontent.com/904lXYq0ZmswFzRUHT6QHkIRLqjAuumOMTkLFJ1NesfBSRSsisel3lPj_ullkjhz6WZ8EyeH4svxK6omd28EiBW2ryoOxJ6_cPZWQF7n41NWagzsi01tpmbtnkNH0eAaZT9eQjSgnvpmu3HUfXcZxB4)


## Étape 9

Ajoutez un **_RasterTiler_**

**_Le transformateur "RasterTiler" dans FME divise une image raster en plusieurs tuiles plus petites, facilitant ainsi le traitement, la manipulation ou l'analyse de grandes images raster en segments plus gérables._**

**_**_![](https://lh7-us.googleusercontent.com/Onhy3ZFanPDGIW_CiypEUKzjWX2qihvslsU3OmvTh7gQGqFX4gMWLAVMdmjzfSyA9nlI9DAGc_uxhdGDjAqqCSYLwEuPxQjh3xPWPgoZPeRFsaetqj9bkNjfShj8ocfBrO8XITe661Lxe4vcujONpd8)_**_**


## Étape 10

- Écrivez le résultat du **_RasterTiler_** dans la BD (Postgis Raster)

- Nom de la table : **_mns\_10x10\_tiles_**


## ![](https://lh7-us.googleusercontent.com/78OhY2YBIzvVeFC0d1wI0exbfOUXcnNy3P0ll8J-v0YCEDtaTlSNTIEQeWcaUnONjaPqSxYzPdnxPksck2PK_TMxLd0tjeGYumXQUCQUywh5RMX5N9Jki9K8sCzlC7rEFPYso1CWS39mcetsZRbNmRY)

## Étape 11

Depuis le **_RasterCellValueRounder_** 

Ajoutez un **_WebMapTiler_** pour créer des tuiles web de MNS

![](https://lh7-us.googleusercontent.com/2NrSOdVvBagM-rLmCaB78f2fg4-tR47odeX0XVPxcnfFYjy58-ip0Kizfd9gMshjo9Jf7prrSkMaaCE4P3Qu8h3IrThKnv5ls5nkojpHYzz5YIlCsqK8p2pwrQtZUfZAPrD95deCXEOz74uSwbQ8nXQ)


## Étape 12

- Écrivez le résultat du **_WebMapTiler_** dans la BD (Postgis Raster)

- Nom de la table : **_mns\_wmt_**
