Laboratoire cours 9 - GEO7630H24

[**Prérequis ****2**](https://docs.google.com/document/d/1k8meOZcHu413wrUnj25UDK03XKgHnFLuqatYnZ6-Aqs/edit#heading=h.84ywk8x2lpn)

[Étape 0 2](https://docs.google.com/document/d/1k8meOZcHu413wrUnj25UDK03XKgHnFLuqatYnZ6-Aqs/edit#heading=h.1ysr0hl64b3a)

[Étape 1 4](https://docs.google.com/document/d/1k8meOZcHu413wrUnj25UDK03XKgHnFLuqatYnZ6-Aqs/edit#heading=h.8lfo0mp7i53o)

[**Laboratoire ****5**](https://docs.google.com/document/d/1k8meOZcHu413wrUnj25UDK03XKgHnFLuqatYnZ6-Aqs/edit#heading=h.imw3v927sqgu)

[Étape 1 5](https://docs.google.com/document/d/1k8meOZcHu413wrUnj25UDK03XKgHnFLuqatYnZ6-Aqs/edit#heading=h.npwm13voq286)

[Étape 2 5](https://docs.google.com/document/d/1k8meOZcHu413wrUnj25UDK03XKgHnFLuqatYnZ6-Aqs/edit#heading=h.jk6sgtz1zot0)

[Étape 3 6](https://docs.google.com/document/d/1k8meOZcHu413wrUnj25UDK03XKgHnFLuqatYnZ6-Aqs/edit#heading=h.32vuq7czks03)

[Étape 4 6](https://docs.google.com/document/d/1k8meOZcHu413wrUnj25UDK03XKgHnFLuqatYnZ6-Aqs/edit#heading=h.dx33x6dfqj2z)

[Étape 5 7](https://docs.google.com/document/d/1k8meOZcHu413wrUnj25UDK03XKgHnFLuqatYnZ6-Aqs/edit#heading=h.nivl4u1i8ow8)

[Étape 7 7](https://docs.google.com/document/d/1k8meOZcHu413wrUnj25UDK03XKgHnFLuqatYnZ6-Aqs/edit#heading=h.tlc2v28btyxv)

[Étape 8 7](https://docs.google.com/document/d/1k8meOZcHu413wrUnj25UDK03XKgHnFLuqatYnZ6-Aqs/edit#heading=h.dsh97b2avazu)

[Étape 9 8](https://docs.google.com/document/d/1k8meOZcHu413wrUnj25UDK03XKgHnFLuqatYnZ6-Aqs/edit#heading=h.kvd5ufdcp8ur)

[Étape 10 9](https://docs.google.com/document/d/1k8meOZcHu413wrUnj25UDK03XKgHnFLuqatYnZ6-Aqs/edit#heading=h.bkl0bhyqv8qo)

[Étape 11 9](https://docs.google.com/document/d/1k8meOZcHu413wrUnj25UDK03XKgHnFLuqatYnZ6-Aqs/edit#heading=h.udgtnytx19eb)


#

# Prérequis

Ouvrez l’application Visual Studio

Assurez-vous d’avoir préalablement connecté votre compte github à visual studio

Ensuite Cloner le “repo” <https://github.com/Captain-Oski/GEO7630_H24>

![](https://lh7-us.googleusercontent.com/PYRPe2tIlYOvf3ziRfm_CMjs-6JYXctNVNB7MiOg4T-NpUrhOuRvGb9hqxe3n6GbBsbaC1Tpq6pU8HlXwxLJaQ6dQ10g2VKNvL3ZPtgHbbHQL76L0PnT8EdgULix-fp2r_kdYmP-jsfwg5PCYJ8ZZRQ)


## Étape 0 

Créer votre propre branche du labo

![](https://lh7-us.googleusercontent.com/U3Xi6m6MzAQxr1xdZW_cd6sZD853fKiM21f8twL_7WUS3eqqDlF1hRJ5hoQKkxjkevWo4-DqBbdz7llUxOg1EBEYzuBFLCIdMQ0-dPuCVI8a6j2KyXe9GFal246IexTGSeZesKywfpObxJBqinOkXbA)

![](https://lh7-us.googleusercontent.com/WFjlNLaqtAAQEZ_K9a14LNT0SM4Az2J_Pifk5EAuDM_-qgEjXZK4u0P0dMq8ZFxCWJkkB_HsTFLcryNEqEBOEkY5eESTQyY4eFxVzjU4ZmszgzGih09vqNCgaLhywSwwYCKwE-v_Wrag4dI8RIkX66A)


## Étape 1

Dans le répertoire ou se trouve le dossier du laboratoire 9 ouvrez le fichier HTML pour vérifier que l’application charge correctement.

\
![](https://lh7-us.googleusercontent.com/Y8RU4F-u1f4Aj1iYA6rPscQ_bsc0bSjkxVMBzDcrF_IMCctKY5l7iKzUvkocTrZJ0eQQf46FCPl531GlgnuJkpauvCHPNOXsJxKVObFd6pN5LHkj7Di4b76Vx1x7bB_NETQy0Q3Xxrdl9LiiA-IRMMY)


# Laboratoire

Maintenant que vous avez votre “repo” fonctionnel vous allez pouvoir modifier du code HTML, CSS et JS pour vous familiariser avec l’environnement de développer et la librairie javascript MaplibreGL


## Étape 1

Changez les coordonnées de départs de l’application dans le fichier lab9.js qui contient toute les instructions pour interagir avec la libraire.

\[-73.55, 45.55]

Sauvegarder votre fichier

Et lancer votre fichier HTML pour vérifier que la localisation de départ à bien changé

![](https://lh7-us.googleusercontent.com/eGp6GAc_DIXtQ-0o1TxsiEtHkc1b3ha77fLCh0V-gdpW_fYes89nlO0lPZyuy28SXMi6IaJQtEKM7RVmJw4QzexOnREHwsbFDlDhQ_H0olXWgJZHexasTFTgDWown7C0ahiIXPGoaWqd3bAHcf9RKQk)


## Étape 2

Ici on va modifier la couleur de base des polygones de garages dans la fonction 

colorPolygons (ligne 96)

![](https://lh7-us.googleusercontent.com/3PQJlDg_4RBawM5GklxaSockZ_CLCW1wA2fvWJ9Mdtpehf2YnokwNuFeSnJtE22Bee7uhzNMQoME2FjbC-z3j_2rRQ3v3GMMtwCkhnjFfvgohtfyYp3DipKiCp53UUug-SOYwYN19OVxat2od6oncIE)

Changer la couleur du geojson de red à #9f40ff

Sauvegarder et vérifier vos changements à l’aide du bouton “Colorier”

![](https://lh7-us.googleusercontent.com/e4t0KQLmZblDXRKomMDbHx1a33DrQ2h9Phwa43tDh9cOXyqHSZcQI4HhFBmWU7dwbo2m1odBCDbgExAByDwdFBo2Qb6LzHj5OGvcoLImbpmKvr-0q4fFyyplJ2cuR2dO5byB5yhrj8aJEvHS8w1Y7X4)


## Étape 3

Créer un nouveau fichier dans la racine du projet, ce fichier est un fichier javascript qui nous permettra d’y mettre le code d’une fonctionnalité que nous pourrons ensuite appeler à notre guise lorsque nous voudrons utiliser la fonctionnalité pour colorier de manière aléatoires les polygones de garages

![](https://lh7-us.googleusercontent.com/iGJHZk105AO0rqLCIN3fEzKTFcnOfy-aVgSgh_ECKq8h4w7yFgVoeGqT0dOzSHwic4OqU79_0iWLMXk2JL4YkZQkY2CojkoCiky-jrjjMSgwRcGTDFahtUynDS0Wx9B-n8VFsb_bbeWEHBZxs8Uj1wU)

nom du fichier : randomColor.js


## Étape 4

et copier coller ce code dans le fichier javascript vide

_function randomColor() {_

  _// Generate three random values between 0 and 255_

  _var r = Math.floor(Math.random() \* 256);_

  _var g = Math.floor(Math.random() \* 256);_

  _var b = Math.floor(Math.random() \* 256);_

  _// Combine the RGB values into a single hexadecimal color code_

  _var hexColor = "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);_

  _// Return the color code_

  _return hexColor;_

_}___

![](https://lh7-us.googleusercontent.com/5iRx16Cus_iltffq4bOVaOWZZOHV2qFYtfNSaOHK1tIW54Cp4o8ihMXTKr9-yg-71zsr2IzF9VoIXdaLjTiMBCOkBEjHZpF62sGeQ9hIW4ZZs9jI1CmcHR_aN-5ZzJybS7-MbJ7K86voNYehqExLLoQ)


## Étape 5

Ajouter le fichier randomColors.js dans le fichier lab9.html pour mettre à jour les librairies qui sont chargées par le fichier HTML

Dans le fichier HTML au dessus de lab9.js comme ci dessous

![](https://lh7-us.googleusercontent.com/NJTTm5Std_i4pNoSnIoLq47p5Nsx2z_OLbSnJzZnDdDGT0Q7VPBD3u2Bm3_eewIP-TWZHuyPZUAzw9BubD-Jr8pgeN0A2AwCNtG_3xa7Gg9QHZkF13LNO6UDD3FyYxfkpQRE9yN2CooCJZbG1wft8GQ)

 


## Étape 7

- Modifier la fonction colorPolygons() dans le fichier lab9.js pour mettre une couleur aléatoire sur les polygones

- Changez la propriété de couleur en 3eme paramètre “ #9f40ff” pour la fonction qui retourne une couleur aléatoire.

![](https://lh7-us.googleusercontent.com/3nWTdQkNT8Wgjq9o7jAejXcOWP1JDvBv3mKiA-Ylk-Ye7xJ8ViyEBlKN3TLcCAVDA-RpTUNXw2pvQaWYxZqd8-dTUEz3fpl1gDJQSiRaHkGmg8k4IxPMMTJ5Lvi6oNhT1tydFItUfYVmdrhFPyNmhxo)


## Étape 8 

- Testez vos changements dans l’application en cliquant plusieurs fois sur le bouton colorier


## Étape 9

- Ici nous allons changer la couleur thématique de chaque garage en fonction d’une propriété stockée dans le geojson. Comme cela nous pourrons visualiser rapidement quel garage appartient à quel opérateur

![](https://lh7-us.googleusercontent.com/UlNOplojXiO3usdiS0Jf7n-U3o_IFvBldMnHuAQ9Vcghjz4PfHFtRhgDaDJBpPDy3ItWUQ2epWfewomKb4WiCpkvzeJ_8EDXciJwADGUp4qJ763PnkViqCIlKPT2vNHxS192RnXfdd6f6_ydSwZPsGs)

- propriété à utiliser : operator\_id

Remplacer la fonction randomColor() par l’objet javascript suivant dans la fonction _colorPolygons()_

        _{_

         ___property: 'operator\_id',_

         ___stops: \[_

            _\[2, randomColor()],_

            _\[3, randomColor()],_

            _\[15, randomColor()],_

            _\[20, randomColor()],_

            _\[25, randomColor()],_

            _\[30, randomColor()]_

         ___]_

_}_


## Étape 10

Testez vos changements dans le front end en cliquant plusieurs fois sur le bouton **_colorier_**

![](https://lh7-us.googleusercontent.com/S5VcfiZ_2ZPZNV6z96l-YUiRtXWlmvSBBzeLa_FHuyHOMQ-4ZDaoFVbR0staXXO8WQsiIYBDHkNh-1WRVgp25_arEpjXblwu7XisU9keerIfF03t3_hh8mpv6NcgUyb3RQNINhTCsf5udG3BkaxoykY)


## Étape 11

- Ajouter une couche d’étiquette

* Au même endroit ou votre fonction ajoute la couche des garages lorsque vous cliquez sur le bouton (hint map.addLayer)

Ajoutez-y le code suivant pour ajouter une couche d’étiquette

Remarquer le id a changé (les id doivent être unique)

Le type de la source a changé

Ce n’est plus la propriété paint que nous utilisons mais la propriété **layout**

On utilise la nomenclature get pour aller chercher les valeurs de operator\_id comme valeur d’étiquette

Dans le paint nous allons “paint” la couleur, la taille du halo

      _map.addLayer({_

            _'id': 'geojson-label',_

           _'type': 'symbol',_

           _'source': 'geojson-source',_

           _'layout': {_

               _'text-field': \['get', 'operator\_id'],_

               _},_

            _"paint": {_

                _"text-color": "#202",_

                _"text-halo-color": "#fff",_

                _"text-halo-width": 2_

            _}_

       _});_

![](https://lh7-us.googleusercontent.com/okBCkWp-Ytv8sHFYn7HX9vDBomo0n1vrGu1qioLD-8ehLyhWTZLZks8Okde0k_yh5Pz68ESKQTibpBgEthp9ZcV-ka4C-1ASCBZ3Z1CinSD1rYCXSEL3WZecRi3h7QkDxpXjzEncv_tvE4g6pftHuTE)

Étape 12

- Dans le panneau “Source Control” regardez vos changements et “stager” les grâce au petit + à côté du nom du fichier

![](https://lh7-us.googleusercontent.com/8p8USuQBGMRhZpR8TLujKyBBifbFKFY88lOY5-lGcBn60mDl0ysJEjUVNInEFmFrR0xrjHXOCt-JTnzqwxK4Cx3oJKsdQ_iFjcImQUiEUcJExgwVBTT2jCcJq4IyOf6mWsKHtPBj2fN-BF1O9bGUKuQ)

Cette étape est juste pour vous montrer les fonctionnalités de source controle pour sauvegarder et modifier votre code dans github on aura l’occasion de retravailler ces concepts.

Good job ! 
